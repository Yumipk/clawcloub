name: "ClawCloud è´¦å·1 ä¿æ´»ï¼ˆGitHubè´¦å·Aï¼‰"

on:
  schedule:
    # æ¯æœˆ1å·å’Œ16å· UTC 7:00 è¿è¡Œï¼ˆåŒ—äº¬æ—¶é—´15:00ï¼‰
    - cron: '0 7 1,16 * *'
  
  workflow_dispatch:

env:
  # ä½¿ç”¨è´¦å·1çš„é…ç½®
  ACCOUNT_NAME: "è´¦å·1ï¼ˆGitHubè´¦å·Aï¼‰"
  CLAW_CLOUD_URL: ${{ secrets.CLAW_CLOUD_URL_1 }}
  GH_USERNAME: ${{ secrets.GH_USERNAME_1 }}
  GH_PASSWORD: ${{ secrets.GH_PASSWORD_1 }}
  GH_SESSION: ${{ secrets.GH_SESSION_1 }}
  TG_BOT_TOKEN: ${{ secrets.TG_BOT_TOKEN }}
  TG_CHAT_ID: ${{ secrets.TG_CHAT_ID_1 }}
  REPO_TOKEN: ${{ secrets.GITHUB_TOKEN }}

jobs:
  auto-login:
    runs-on: ubuntu-latest
    timeout-minutes: 15
    
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4

      - name: è®¾ç½® Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: å®‰è£…ä¾èµ–
        run: |
          pip install playwright requests pynacl
          playwright install chromium
          playwright install-deps
    
    - name: "ğŸš€ è¿è¡Œè‡ªåŠ¨ç™»å½•"
      env:
        GITHUB_REPOSITORY: ${{ github.repository }}
        TWO_FACTOR_WAIT: 120
      run: |
        echo "=========================================="
        echo "ğŸ¤– å¼€å§‹æ‰§è¡Œ ClawCloud è‡ªåŠ¨ç™»å½•"
        echo "è´¦æˆ·: $ACCOUNT_NAME"
        echo "GitHubè´¦å·: $GH_USERNAME"
        echo "åœ°åŒº: $CLAW_CLOUD_URL"
        echo "æ—¶é—´: $(date)"
        echo "=========================================="
        
        python auto_login.py
        
        echo "=========================================="
        echo "âœ… è‡ªåŠ¨ç™»å½•å®Œæˆ"
        echo "=========================================="
