name: "ClawCloud è´¦å·2 ä¿æ´»ï¼ˆGitHubè´¦å·Bï¼‰"

on:
  schedule:
    # æ¯æœˆ1å·å’Œ16å· UTC 8:00 è¿è¡Œï¼ˆæ¯”è´¦å·1æ™š1å°æ—¶ï¼‰
    - cron: '0 8 1,16 * *'
  
  workflow_dispatch:

env:
  # ä½¿ç”¨è´¦å·2çš„é…ç½®
  ACCOUNT_NAME: "è´¦å·2ï¼ˆGitHubè´¦å·Bï¼‰"
  CLAW_CLOUD_URL: ${{ secrets.CLAW_CLOUD_URL_2 }}
  GH_USERNAME: ${{ secrets.GH_USERNAME_2 }}
  GH_PASSWORD: ${{ secrets.GH_PASSWORD_2 }}
  GH_SESSION: ${{ secrets.GH_SESSION_2 }}
  TG_BOT_TOKEN: ${{ secrets.TG_BOT_TOKEN }}
  TG_CHAT_ID: ${{ secrets.TG_CHAT_ID_2 }}
  REPO_TOKEN: ${{ secrets.GITHUB_TOKEN }}

jobs:
  login:
    runs-on: ubuntu-latest
    timeout-minutes: 15
    
    steps:
    - name: "ğŸ“¥ æ£€å‡ºä»£ç "
      uses: actions/checkout@v4
    
    - name: "ğŸ è®¾ç½® Python"
      uses: actions/setup-python@v5
      with:
        python-version: '3.10'
    
    - name: "ğŸ“¦ å®‰è£…ä¾èµ–"
      run: |
        python -m pip install --upgrade pip
        pip install playwright requests nacl
        playwright install chromium
    
    - name: "ğŸš€ è¿è¡Œè‡ªåŠ¨ç™»å½•"
      env:
        GITHUB_REPOSITORY: ${{ github.repository }}
        TWO_FACTOR_WAIT: 120
      run: |
        echo "=========================================="
        echo "ğŸ¤– å¼€å§‹æ‰§è¡Œ ClawCloud è‡ªåŠ¨ç™»å½•"
        echo "è´¦æˆ·: $ACCOUNT_NAME"
        echo "GitHubè´¦å·: $GH_USERNAME"
        echo "åœ°åŒº: $CLAW_CLOUD_URL"
        echo "æ—¶é—´: $(date)"
        echo "=========================================="
        
        python auto_login.py
        
        echo "=========================================="
        echo "âœ… è‡ªåŠ¨ç™»å½•å®Œæˆ"
        echo "=========================================="